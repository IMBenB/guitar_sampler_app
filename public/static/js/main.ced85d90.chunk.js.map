{"version":3,"sources":["v_icon.svg","App.js","serviceWorker.js","index.js"],"names":["module","exports","myIcon","L","icon","iconUrl","iconSize","iconAnchor","popupAnchor","sampleIcon","App","props","startSample","e","setState","canSample","counterAndLocation","navigator","geolocation","getCurrentPosition","position","counter","state","location","lat","coords","latitude","lng","longitude","haveUserLocation","zoom","console","log","data","fetch","method","body","JSON","stringify","headers","then","res","json","resJson","catch","err","error","samplePosition","isOK","doc","dir","this","className","Map","center","TileLayer","attribution","url","Marker","Popup","map","sample","key","_id","Badge","color","Button","onClick","Component","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ced85d90.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/v_icon.e3270698.svg\";","import React, { Component } from 'react';\nimport L from 'leaflet';\nimport { Map, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { Button, Badge } from 'reactstrap';\nimport iconUrl from './v_icon.svg'\nimport './App.css';\n\n\n\nconst myIcon = L.icon({\n  iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=',\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [0, -30],\n\n\n});\nconst sampleIcon = L.icon({\n  iconUrl: iconUrl,\n  iconSize: [30, 50],\n  iconAnchor: [15, 50],\n  popupAnchor: [0, -30],\n\n\n});\n\nclass App extends Component {\n  constructor(props) { //props crush my web????why???\n    super(props);\n\n    this.state = {\n      location: {\n        lat: 32.30,\n        lng: 34.85,\n      },\n      haveUserLocation: false,\n      canSample: false,\n      zoom: 2,\n      counter: 0,\n      samplePosition: []\n    }\n  }\n\n  componentDidMount() {\n    fetch('/getData', {\n      method: 'POST',\n      body: JSON.stringify(), // data can be `string` or {object}!\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => res.json())\n      .then(samplePosition => {\n        if (samplePosition.isOK) {\n          this.setState({\n            samplePosition: samplePosition.doc\n            // })\n\n          })\n        } else {\n          console.dir(samplePosition.error)\n        }\n\n        console.log('bbb')\n        // console.dir(samplePosition);\n\n\n      }).catch(err => {\n        console.error(err)\n      })\n\n\n\n    navigator.geolocation.getCurrentPosition((position) => {\n      this.setState({\n        location: {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        },\n        haveUserLocation: true,\n        zoom: 15\n      })\n      console.log(position)\n    },\n      () => {\n        console.log('no location')\n        fetch('https://ipapi.co/json')\n          .then(res => res.json())\n          .then(location => {\n            console.log(location);\n            this.setState({\n              location: {\n                lat: location.latitude,\n                lng: location.longitude\n              },\n              haveUserLocation: true,\n              zoom: 15,\n\n            })\n          })\n        // alert('please confirm your location')\n      }\n    );\n  }\n  startSample = (e) => {\n    this.setState({ canSample: true })\n  }\n  counterAndLocation = (e) => {\n    // this.setState({ counter: this.state.counter + 1 })\n    // e.preventDefault();\n\n    navigator.geolocation.getCurrentPosition((position) => {\n      this.setState({\n        counter: this.state.counter + 1,\n        location: {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        },\n        haveUserLocation: true,\n        zoom: 15,\n\n\n      })\n      // console.log(position)\n      console.log(`lat: ${this.state.location.lat}`)\n      console.log(`lng: ${this.state.location.lng}`)\n\n    });\n    let data = {\n      latitude: this.state.location.lat,\n      longitude: this.state.location.lng\n    };\n    fetch('/addData', {\n      method: 'POST',\n      body: JSON.stringify(data), // data can be `string` or {object}!\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => {\n        res.json()\n          .then(resJson => {\n            // console.dir(resJson)\n            console.log('ben')\n            console.log(resJson[10].latitude)\n            console.log(resJson[10].longitude)\n            // this.setState({samplePosition:{sampleLat : resJson[0].latitude,\n            // sampleLng:resJson[0].longitude}\n\n            // })\n\n          })\n      }).catch(err => {\n        console.error(err)\n      })\n\n\n\n  }\n\n  render() {\n\n\n    const position = [this.state.location.lat, this.state.location.lng];\n    // const position2 = [32.111, 35.1111]\n    return (\n      <div className=\"map\" >\n        <Map className=\"map\" center={[this.state.location.lat, this.state.location.lng]} zoom={this.state.zoom}>\n          <TileLayer\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          {\n            this.state.haveUserLocation ?\n              <Marker\n                position={position}\n                icon={myIcon}>\n                <Popup>\n                  you start here\n         </Popup>\n              </Marker> : ''\n          }\n          {/* {this.state.samplePosition.map(sample =>{\n            <Marker\n              position={sample.latitude,sample.longitude}\n              icon={sampleIcon}>\n              <Popup>\n                {this.state.samplePosition.sampleLat}\n              </Popup>\n            </Marker>\n          })\n            \n          } */}\n          {this.state.canSample ?\n            this.state.samplePosition.map(sample => {\n              return (\n\n                <Marker\n                  key={sample._id}\n                  position={[sample.latitude, sample.longitude]}\n                  icon={sampleIcon}>\n                  {console.log('a')}\n                  <Popup>\n\n\n                    {sample._id}\n                  </Popup>\n                </Marker>)\n            }) : console.log('fail')\n          }\n\n        </Map>\n        <div className=\"box\"  >\n          <h1> <Badge color=\"secondary\">{this.state.counter}</Badge></h1>\n        </div>\n        <Button className='button' color=\"primary\" onClick={this.counterAndLocation}>FISH</Button>{' '}\n        <Button className='playButton' color=\"primary\" onClick={this.startSample}>play</Button>{' '}\n\n      </div>\n\n    );\n  }\n}\n\nexport default App;\n\n// npm start\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'leaflet/dist/leaflet.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}